# 测试端配置界面使用说明

## 概述

测试端配置界面提供了一个Web界面来配置和管理自适应分组测试策略。用户可以通过前端界面动态配置不同未知关系比例下的集群比例，以及什么时候使用二分法处理。

## 启动方式

### 1. 启动主服务器
```bash
# 在项目根目录
python run_web_server.py
```
主服务器将在 http://localhost:5000 运行

### 2. 启动测试端服务器
```bash
# 在testFlaskClient目录
python start_test_server.py
```
测试端服务器将在 http://localhost:5001 运行

## 功能特性

### 1. 系统状态管理
- **初始化系统**: 根据配置创建测试器实例
- **重置系统**: 清除所有测试数据
- **状态监控**: 实时显示系统状态、测试次数、当前策略等

### 2. 基础配置
- **总点位数**: 设置测试的总点位数量
- **最大测试次数**: 设置测试的最大次数限制
- **并发数**: 设置并发测试数量

### 3. 策略配置
#### 预设策略
- **平衡策略**: 默认的平衡配置
- **保守策略**: 更保守的分组比例和阈值
- **激进策略**: 更激进的分组比例和阈值
- **自定义**: 完全自定义配置

#### 动态策略阈值配置
- **50%集群策略**: 配置未知关系比例范围和集群比例
- **30%集群策略**: 配置未知关系比例范围和集群比例
- **10%集群策略**: 配置未知关系比例范围和集群比例
- **二分法策略**: 配置未知关系比例范围和策略类型

### 4. 高级配置
- **最小/最大分组大小**: 设置分组的大小限制
- **最小未知关系比例**: 设置分组内最小未知关系比例
- **动态调整**: 启用/禁用动态策略调整
- **调整阈值**: 设置策略调整的触发阈值

### 5. 测试控制
- **开始测试**: 启动自适应分组测试
- **停止测试**: 停止正在运行的测试
- **暂停/继续**: 暂停或继续测试
- **保存/加载配置**: 保存配置到文件或从文件加载
- **导出结果**: 导出测试结果

## 配置说明

### 策略阈值配置

每个策略阶段包含以下配置项：

1. **未知关系比例范围**: 定义该策略适用的未知关系比例范围
2. **集群比例**: 定义该策略使用的集群比例
3. **策略类型**: 对于二分法阶段，可以选择二分法或穷举法

### 配置示例

```json
{
  "total_points": 100,
  "concurrency": 4,
  "test_execution": {
    "max_total_tests": 2000,
    "phase_switch_criteria": {
      "phase_thresholds": {
        "phase_1": {
          "min_unknown_ratio": 0.5,
          "max_unknown_ratio": 1.0,
          "group_ratio": 0.5
        },
        "phase_2": {
          "min_unknown_ratio": 0.3,
          "max_unknown_ratio": 0.5,
          "group_ratio": 0.3
        },
        "phase_3": {
          "min_unknown_ratio": 0.1,
          "max_unknown_ratio": 0.3,
          "group_ratio": 0.1
        },
        "binary_search": {
          "min_unknown_ratio": 0.0,
          "max_unknown_ratio": 0.1,
          "group_ratio": 0.0
        }
      }
    }
  },
  "adaptive_grouping": {
    "min_group_size": 5,
    "max_group_size": 50,
    "min_unknown_relations_per_group": 0.7,
    "enable_dynamic_adjustment": true,
    "adjustment_threshold": 0.8
  }
}
```

## 使用流程

### 1. 初始化系统
1. 打开测试端配置界面 (http://localhost:5001)
2. 配置基础参数（总点位数、最大测试次数等）
3. 选择或配置策略参数
4. 点击"初始化系统"按钮

### 2. 配置策略
1. 选择预设策略或自定义配置
2. 调整各阶段的未知关系比例范围
3. 设置各阶段的集群比例
4. 配置高级参数（可选）

### 3. 开始测试
1. 确保主服务器正在运行
2. 点击"开始测试"按钮
3. 观察测试日志和状态更新
4. 测试完成后可以导出结果

### 4. 监控和调整
1. 实时查看系统状态
2. 观察测试日志
3. 根据需要调整配置
4. 保存配置供下次使用

## 注意事项

1. **主服务器依赖**: 测试端需要主服务器运行才能正常工作
2. **配置验证**: 系统会自动验证配置的有效性
3. **实时更新**: 配置更改会实时反映在系统状态中
4. **数据持久化**: 可以保存和加载配置文件
5. **错误处理**: 系统会显示详细的错误信息

## 故障排除

### 常见问题

1. **系统初始化失败**
   - 检查主服务器是否运行
   - 验证配置参数是否有效
   - 查看错误日志

2. **测试启动失败**
   - 确保系统已初始化
   - 检查配置是否完整
   - 验证主服务器连接

3. **状态更新异常**
   - 检查网络连接
   - 重启测试端服务器
   - 查看浏览器控制台错误

### 调试信息

- 测试日志会显示详细的执行信息
- 浏览器控制台会显示JavaScript错误
- 服务器控制台会显示Python错误

## 技术架构

### 前端
- HTML5 + CSS3 + JavaScript
- 响应式设计
- 实时状态更新

### 后端
- Flask Web框架
- RESTful API设计
- 多线程测试执行

### 配置管理
- JSON格式配置
- 预设配置支持
- 动态配置验证

## 扩展功能

### 未来计划
1. 更多预设策略
2. 实时图表显示
3. 批量测试支持
4. 性能分析工具
5. 配置模板管理

### 自定义开发
- 可以扩展API接口
- 可以添加新的配置项
- 可以集成其他测试工具

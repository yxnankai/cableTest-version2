# 🚀 线缆测试系统 Web版本 - 快速启动指南

## ⚡ 5分钟快速启动

### 1️⃣ 安装依赖
```bash
# 安装所有必需的Python包
pip install -r requirements.txt

# 如果遇到编码问题，使用国内镜像
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 2️⃣ 启动Web服务器
```bash
# 启动带前端界面的Web服务器
python run_web_server.py
```

### 3️⃣ 访问Web界面
```
在浏览器中打开: http://localhost:5000
```

### 4️⃣ 开始使用
- 🧪 **运行实验**: 设置电源点位和测试点位，点击"开始实验"
- 🎲 **随机实验**: 点击"随机实验"自动生成测试参数
- 📊 **实时监控**: 查看点位状态、集群信息、测试历史
- 🔄 **自动更新**: 界面每2秒自动刷新，无需手动操作

## 🌟 主要功能特性

### 📱 实时监控界面
- **系统状态仪表板**: 显示总点位、继电器切换时间、已确认集群等
- **点位状态网格**: 可视化显示前100个点位的开关状态（绿色=开启，红色=关闭）
- **集群连接信息**: 实时显示已确认的继电器集群连接
- **测试历史记录**: 查看所有测试记录，包括时间、结果、性能指标

### 🧪 实验控制
- **手动实验设置**: 精确控制电源点位和测试点位
- **随机实验生成**: 自动生成随机测试参数，快速验证系统
- **实时状态反馈**: 实验执行过程中实时显示进度和结果
- **批量实验支持**: 支持一次运行多个实验

### 🔄 自动更新机制
- **WebSocket实时推送**: 每2秒自动推送状态变化
- **无需手动刷新**: 所有数据自动更新，保持界面最新状态
- **性能优化**: 只推送变化的数据，减少网络开销

## 🔌 API接口使用

### 基础API调用
```bash
# 健康检查
curl http://localhost:5000/api/health

# 获取系统信息
curl http://localhost:5000/api/system/info

# 获取点位状态
curl http://localhost:5000/api/points/status

# 获取集群信息
curl http://localhost:5000/api/clusters
```

### 运行实验
```bash
# 运行单个实验
curl -X POST "http://localhost:5000/api/experiment" \
     -H "Content-Type: application/json" \
     -d '{"power_source": 0, "test_points": [1,2,3,4,5]}'

# 运行批量实验
curl -X POST "http://localhost:5000/api/experiment/batch" \
     -H "Content-Type: application/json" \
     -d '{"test_count": 5, "max_points_per_test": 100}'
```

## 🎯 使用场景示例

### 场景1: 基础功能验证
1. 启动服务器后，访问 `http://localhost:5000`
2. 在"实验设置"中输入电源点位 `0`
3. 点击"开始实验"
4. 观察实时状态更新和测试结果

### 场景2: 随机测试验证
1. 点击"随机实验"按钮
2. 系统自动生成随机参数并执行
3. 查看测试结果和状态变化
4. 分析集群连接信息

### 场景3: 性能压力测试
1. 使用API接口进行批量测试
2. 监控系统响应时间和资源使用
3. 查看测试历史记录
4. 分析系统性能指标

## 🔧 常见问题解决

### 问题1: 服务器无法启动
```bash
# 检查端口占用
netstat -an | findstr :5000

# 修改端口
export FLASK_PORT=5001
python run_web_server.py
```

### 问题2: 前端界面无法访问
```bash
# 检查服务器状态
curl http://localhost:5000/api/health

# 检查防火墙设置
# 确保5000端口开放
```

### 问题3: WebSocket连接失败
```bash
# 检查浏览器控制台错误
# 确保网络连接正常
# 检查代理设置
```

### 问题4: 依赖安装失败
```bash
# 使用国内镜像
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# 升级pip
python -m pip install --upgrade pip
```

## 📊 性能指标

- **启动时间**: < 10秒
- **API响应**: < 100ms
- **实时更新**: 2秒间隔
- **内存使用**: 10000点位约50MB
- **并发支持**: 多客户端同时访问

## 🚀 高级功能

### 自定义配置
```bash
# 修改点位数量
export TOTAL_POINTS=20000

# 修改继电器切换时间
export RELAY_SWITCH_TIME=0.005

# 修改监听地址
export FLASK_HOST=0.0.0.0
export FLASK_PORT=8080
```

### 日志和调试
```bash
# 启用调试模式
export FLASK_DEBUG=True

# 查看详细日志
tail -f web_server.log
```

### 生产环境部署
```bash
# 使用生产配置
export FLASK_ENV=production
export FLASK_DEBUG=False

# 使用Gunicorn部署
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:5000 flask_server_web:app
```

## 📚 相关文档

- **完整API文档**: `Flask_API_测试报文示例.md`
- **系统说明**: `README_Flask.md`
- **使用说明**: `使用说明.md`
- **演示脚本**: `demo_web_system.py`

## 🎉 开始使用

现在您已经了解了Web版本的所有功能，可以：

1. **立即启动**: 运行 `python run_web_server.py`
2. **访问界面**: 浏览器打开 `http://localhost:5000`
3. **运行实验**: 尝试手动设置或随机实验
4. **监控状态**: 观察实时数据更新
5. **API测试**: 使用curl或Postman测试接口

**祝您使用愉快！** 🚀✨
